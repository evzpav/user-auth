# --- Base ----
FROM golang:1.13-stretch AS base
WORKDIR $GOPATH/src/gitlab.com/evzpav/documents

# ---- Dependencies ----
FROM base AS dependencies
ENV GO111MODULE=on
COPY go.mod .
COPY go.sum .
RUN go mod download
RUN go get -u github.com/golangci/golangci-lint/cmd/golangci-lint

# ---- Lint ----
FROM dependencies AS lint
COPY . .
RUN golangci-lint run -c ./.golangci.yml
